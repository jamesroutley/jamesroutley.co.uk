<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />

    <title>James Routley  | Spinning up lots of Goroutines</title>

    

    <link type="text/css" rel="stylesheet" href="/css/jamesroutley.css" />
  </head>
  <body><nav>
  <ul>
    
    
    <li><a href="/">Home</a></li>
    
    
    
    
    
    <li><a href="/posts">Posts</a></li>
    
    
    
    
    <li><a href="/posts/lots-of-goroutines">Lots of goroutines</a></li>
    
  </ul>
</nav>
<main>
<article>
  <header>
    <h1>Spinning up lots of Goroutines</h1>
    <time datetime="2020-02-18">18 February 2020</time>
  </header>
  <p>Go&rsquo;s Goroutines are described as &lsquo;lightweight threads&rsquo;. Because they&rsquo;re more
lightweight, you can create many more of them than threads. What happens if we
create loads of them?</p>
<h2 id="unbounded-goroutines">Unbounded goroutines</h2>
<p>Let&rsquo;s write a program which creates an unbounded number of goroutines:</p>
<div class="highlight"><pre style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-go" data-lang="go"><span style="color:#00f">package</span> main

<span style="color:#00f">import</span> (
	<span style="color:#a31515">&#34;fmt&#34;</span>
	<span style="color:#a31515">&#34;time&#34;</span>
)

<span style="color:#00f">func</span> main() {
	i := 1
	<span style="color:#00f">for</span> {
		<span style="color:#00f">if</span> i%1000 == 0 {
			fmt.Printf(<span style="color:#a31515">&#34;spawning goroutine %d\n&#34;</span>, i)
		}
		<span style="color:#00f">go</span> work()
		i++
	}
}

<span style="color:#00f">func</span> work() {
	time.Sleep(time.Hour * 24 * 100)
}
</code></pre></div><pre><code>spawning goroutine 38970000
spawning goroutine 38971000
spawning goroutine 38972000
^C^Csignal: interrupt
</code></pre>
</article>

    </main>
    
    <footer>
  <img id="profile_picture" src="/img/me.png" />
  <p>
    ðŸ‘‹ Hey, I'm James - I'm a senior software engineer building a bank at
    <a href="https://monzo.com/">Monzo</a>. If you like what I post about, you
    should consider applying to the
    <a href="https://www.recurse.com/">Recurse Centre</a>.
  </p>
</footer>

    <script
      data-goatcounter="https://routley.goatcounter.com/count"
      async
      src="//gc.zgo.at/count.js"
    ></script>
  </body>
</html>
